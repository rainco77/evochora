<configuration>
  <!-- Suppress SLF4J replay warnings at JVM level -->
  <contextListener class="ch.qos.logback.classic.jul.LevelChangePropagator">
    <resetJUL>true</resetJUL>
  </contextListener>

  <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
    <target>System.out</target>
    <encoder class="net.logstash.logback.encoder.LogstashEncoder" />
  </appender>

  <appender name="STDOUT_PLAIN" class="ch.qos.logback.core.ConsoleAppender">
    <target>System.out</target>
    <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
      <pattern>%d{yyyy-MM-dd HH:mm:ss} %highlight(%-5level) [%thread] %replace(%X{service}){'^(.+)$', '[$1] '}%logger{1.}: %msg%n</pattern>
    </encoder>
  </appender>

  <!-- Suppress ALL framework logs completely -->
  <logger name="SLF4J" level="OFF" additivity="false"/>
  <logger name="org.slf4j" level="OFF" additivity="false"/>
  <logger name="ch.qos.logback" level="OFF" additivity="false"/>
  <logger name="ch.qos.logback.classic" level="OFF" additivity="false"/>
  <logger name="ch.qos.logback.core" level="OFF" additivity="false"/>
  <logger name="ch.qos.logback.classic.joran" level="OFF" additivity="false"/>

  <!-- Suppress Javalin/Jetty completely -->
  <logger name="io.javalin" level="OFF" additivity="false"/>
  <logger name="org.eclipse.jetty" level="OFF" additivity="false"/>
  <logger name="org.eclipse.jetty.server" level="OFF" additivity="false"/>
  <logger name="org.eclipse.jetty.util" level="OFF" additivity="false"/>
  <logger name="org.eclipse.jetty.io" level="OFF" additivity="false"/>
  <logger name="org.eclipse.jetty.http" level="OFF" additivity="false"/>

  <!-- Evochora-specific loggers - suppress INFO logs during tests -->
  <!-- Compiler logger specifically suppressed -->
  <logger name="org.evochora.compiler.diagnostics.CompilerLogger" level="WARN" additivity="false">
    <appender-ref ref="${evochora.logging.format:-STDOUT_PLAIN}" />
  </logger>

  <!-- ServiceManager and services suppressed -->
  <logger name="org.evochora.datapipeline.ServiceManager" level="WARN" additivity="false">
    <appender-ref ref="${evochora.logging.format:-STDOUT_PLAIN}" />
  </logger>

  <logger name="org.evochora.datapipeline.services" level="WARN" additivity="false">
    <appender-ref ref="${evochora.logging.format:-STDOUT_PLAIN}" />
  </logger>

  <!-- Catch-all for other evochora loggers -->
  <logger name="org.evochora" level="WARN" additivity="false">
    <appender-ref ref="${evochora.logging.format:-STDOUT_PLAIN}" />
  </logger>

  <!-- Root logger set to WARN to show only important logs during tests -->
  <root level="WARN">
    <appender-ref ref="${evochora.logging.format:-STDOUT_PLAIN}" />
  </root>

  <!-- Status listener to suppress Logback configuration logs -->
  <statusListener class="ch.qos.logback.core.status.NopStatusListener" />
</configuration>