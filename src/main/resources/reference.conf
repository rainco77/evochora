# Default configuration for Evochora Data Pipeline with Universal DI
# This file provides sensible defaults for the data pipeline.
# Override specific values in your own pipeline.hocon file or via CLI arguments.

pipeline {
  # Central resource definitions - all shared components (channels, storage, etc.)
  resources {
    #raw-tick-stream {
    #  className = "org.evochora.datapipeline.resources.InMemoryChannel"
    #  options {
    #    capacity = 1000  # Maximum number of messages in the queue
    #  }
    #}
    #
    #raw-data-storage {
    #  className = "org.evochora.datapipeline.resources.storage.H2SimulationRepository"
    #  options {
    #    jdbcUrl = "jdbc:h2:mem:testdb"
    #  }
    #}
  }

  # Service definitions - the actual processing components
  services {
    #simulation-engine {
    #  className = "org.evochora.datapipeline.services.SimulationEngine"
    #  resources {
    #    # Resource with usage type - returns appropriate wrapper/adapter
    #    tickOutput: "channel-out:raw-tick-stream"
    #  }
    #  options {
    #    organismSources = ["assembly/primordial/main.s"]  # Assembly files to load
    #  }
    #}
    #
    #persistence-service {
    #  className = "org.evochora.datapipeline.services.PersistenceService"
    #  resources {
    #    # Multiple resources on one port
    #    tickInput: "channel-in:raw-tick-stream"
    #    # Resource without usage type - injected directly
    #    storageTarget: "raw-data-storage"
    #  }
    #}
    #
    ## Example with producer/consumer pattern
    #dummy-producer {
    #  className = "org.evochora.datapipeline.services.DummyProducerService"
    #  resources {
    #    output: "channel-out:raw-tick-stream"
    #  }
    #}
    #
    #dummy-consumer {
    #  className = "org.evochora.datapipeline.services.DummyConsumerService"
    #  resources {
    #    input: "channel-in:raw-tick-stream"
    #  }
    #}
  }

  # Optional: Service startup configuration
  autoStart = false
  startupSequence = []  # Order of service startup, empty = all services in parallel

  # Metrics configuration
  metrics {
    enableMetrics = true
    updateIntervalSeconds = 1
  }
}

# Logging configuration
logging {
  format = "JSON"  # Can be "PLAIN" or "JSON". Defaults to PLAIN for interactive, JSON for headless.
  default-level = "WARN"  # Default log level for all loggers
  levels {
    # Specific logger levels - override the default for particular components
    "org.evochora.datapipeline.core.ServiceManager" = "INFO"
  }
}